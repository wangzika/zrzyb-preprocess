# zrzyb-preprocess
自然资源部shp,tiff文件预处理代码
# install
git clone resp


pip install -r requirment.txt


# 数据处理
## 1. 数据预处理
由于遥感影像（tiff数据）和标注数据（shp文件）具有不同的空间分辨率和坐标系，因此在进行深度学习训练前，需要将这两者进行有效的匹配和转换。数据预处理的主要步骤包括：

坐标系转换：tiff数据和shp标注文件使用的坐标系不同，需将shp文件的地理坐标转换为与tiff影像对应的图像坐标系。

数据切分：遥感影像数据是分幅存储的，而标注数据是全国范围的，因此需要根据地理坐标，将全国范围的样本shp文件裁剪为与tiff影像对应区域的shp文件。

图像切割：将裁剪后的shp文件与对应的tiff遥感影像对齐，并切分为512x512的训练样本。每个图像块包含光伏设备的具体目标信息。

## 2. 数据格式化
   
为了将数据输入深度学习模型，数据需要转换为适合模型训练的格式。在这个过程中，将shp文件的标注信息与对应的tiff影像数据进行对接，确保训练集中的每张图像都有准确的标签和地理位置信息。

具体流程：

1首先将全国范围的shp文件切分为与tiff影像对应大小并对齐的shp文件(shp_split_test.py)

2删除切分好的shp文件里面的负样本的矢量以免影响训练精度（delete_BZ.py）

3将标准图幅大小的tiff和shp文件转为512*512大小的图片和二值图（file2png.py）

用训练好的模型预测结果

1 将tiff文件切分为512*512的图片，将这些图片移动到对应的预测文件夹（tiff_split_saveinfo.py）

2 用各个不同开源项目预测代码进行预测

结果数据后处理

1 将得到的结果转为shp文件
将分割得到的二值图转为shp文件(binaryimg2shp.py)
